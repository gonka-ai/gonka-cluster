# Gonka Configuration Environment Variables
# Generated for {{ inventory_hostname }}

# Key Configuration (from Gonka docs)
export KEY_NAME={{ key_name }}
export KEYRING_PASSWORD={{ keyring_password }}

# API and Port Configuration (from Gonka docs)
export API_PORT={{ api_port }}
export PORT={{ api_port }}
export INFERENCE_PORT={{ inference_port }}
export KEYRING_BACKEND=file

# Network Configuration (from Gonka docs)
{% set cluster_name = group_names | select('match', 'cluster[0-9]+') | first %}
export PUBLIC_URL=http://{{ hostvars[groups[cluster_name + '_network_node'][0]]['ansible_host'] }}:{{ api_port }}
export P2P_EXTERNAL_ADDRESS=tcp://{{ ansible_host }}:{{ p2p_port }}

# Account Key Configuration (from Gonka docs)
export ACCOUNT_PUBKEY={{ hostvars[groups[cluster_name + '_network_node'][0]][cluster_name + '_account_pubkey'] | default('PLACEHOLDER_PUBKEY') }}

# Model Cache Configuration (from Gonka docs)
export HF_HOME={{ hf_home }}

# Node Configuration (from Gonka docs - only for network node)
{% if 'network_node' in group_names %}
export NODE_CONFIG=./node-config-generated.json
{% endif %}

# Seed Node URLs (from Gonka docs - keep as is)
export SEED_API_URL={{ seed_api_url }}
export SEED_NODE_RPC_URL={{ seed_node_rpc_url }}
export SEED_NODE_P2P_URL={{ seed_node_p2p_url }}

# DAPI Configuration (from Gonka docs - keep as is)
export DAPI_API__POC_CALLBACK_URL=http://api:9100
export DAPI_CHAIN_NODE__URL=http://node:{{ rpc_port }}
export DAPI_CHAIN_NODE__P2P_URL=http://node:26656

# RPC Server URLs (from Gonka docs - keep as is)
export RPC_SERVER_URL_1={{ seed_node_rpc_url }}
export RPC_SERVER_URL_2=http://node1.gonka.ai:{{ rpc_port }}

# Additional Configuration for Our Deployment
export COMPOSE_PROJECT_NAME={{ compose_project_name }}
export TM_HOME={{ gonka_deploy_dir }}/.tendermint
