---
# Phase 0: Account Key Setup (Local Machine)
# Extract and validate cluster-specific account keys from local key files

- name: Determine cluster name
  set_fact:
    cluster_name: "{{ group_names | select('match', 'cluster[0-9]+') | first }}"

- name: Run key setup locally for this cluster
  include_tasks: per-cluster.yml
  when: inventory_hostname == groups[cluster_name + '_network_node'][0]
